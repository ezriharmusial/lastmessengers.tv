---
import { getCollection } from 'astro:content';
import ArtistInfo from "@components/artists/ArtistInfo.astro";
import ArtistLayout from "@layouts/ArtistLayout.astro";
import { getEntryBySlug } from 'astro:content';

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
	const artists = await getCollection('artists');
	return artists.map(artist => ({
		params: { slug: artist.slug }, props: { artist },
	}));
}

const { slug } = Astro.params;
const artist = await getEntryBySlug('artists', slug);
---

<ArtistLayout >
	<ArtistInfo artist={artist} />
</ArtistLayout>