---
// import '@skeletonlabs/skeleton/themes/theme-gold-nouveau.css';
import '../styles/theme.postcss';
import '@skeletonlabs/skeleton/styles/all.css'
import '../styles/app.postcss';

import { getCollection } from 'astro:content';
import { AppShell, AppBar, LightSwitch } from '@skeletonlabs/skeleton'
import { PageTransition } from 'astro-page-transition';

import Fonts from '../components/head/Fonts.astro';
import SEO from '../components/head/SEO.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Search from '../components/ux/Search.svelte';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';

export let frontmatter

const response = await fetch(Astro.url.origin + '/api/v1/pages.json');
const data = await response.json();
const pageList = await getCollection('pages');

const { index, title, subtitle, image, description  } = frontmatter || Astro.props.frontmatter || Astro.props;
---

<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <!-- Site Meta & SEO -->
	<SEO description{description || subtitle} {title} {image} />
    <!-- Fonts -->
    <Fonts />
</head>
<body data-theme="gold-nouveau" class="light:bg-white light:text-black dark:text-white dark:bg-black loaded ">
	<slot name="extendedHead" />

	<!-- Page Transition -->
	<PageTransition speed={500} color={"orange"} zIndex={99} />
	<div style="display: contents" class="h-full overflow-hidden">

        <AppShell slotSidebarLeft="bg-surface-500/5 w-56 p-4">
            <svelte:fragment slot="header">
                <AppBar background="bg-surface-100-800-token dark:bg-surface-800-100-token">
                <svelte:fragment slot="lead">
                <a class="flex flex-shrink items-center text-black hover:text-yellow-400 focus-text-gray-900 dark:text-white dark:hover:text-yellow-400 dark:focus:text-gray-100 mt-2 lg:mt-0 mr-1 " href="/">
					<figure class="image transition-all duration-500 m-0 p-0 w-10 xs:w-8 lg:w-14 xl:w-16 {$player.track?.alignImage == 'right'  ? 'ml-1 md:ml-2 -scale-x-100' : 'mr-1 md:mr-2'}">
						<img class="lazy drop-shadow-2xl" src="/images/red-black-purple-gold-with-sun.svg" alt="LastMessengers Home"/>
					</figure>
					<h1 class="transition-colors duration-500 text-xl font-bold leading-4 md:text-2xl md:leading-5 lg:text-3xl xl:text-4xl lg:leading-7 xl:leading-9 drop-shadow-2xl text-black hover:text-yellow-400 focus-text-gray-900 dark:text-white dark:hover:text-yellow-400 dark:focus:text-gray-100">
						Last<br />
						MessengerS
					</h1>
				</a>
                </svelte:fragment>

                <Search {data} client:load />

                <svelte:fragment slot="trail">
					<ul class="navbar-nav xs:flex-col md:flex pl-0 list-style-none font-semibold text-xl mr-auto" >
                        <!-- {pageList && pageList.map(page => (
                            <li class="nav-item p-4 md:pl-8 pr-8">
                                <a href={"/" + page.slug} >
                                    <span class="flex-auto">
                                    {page.data.title}
                                    </span>
                                </a>
                            </li>
                        ))} -->

						<li class="nav-item p-4 md:pl-8 pr-8">
							<a class="nav-link dark:text-white dark:hover:text-yellow-400 dark:focus:text-gray-100 text-black hover:text-yellow-400 focus-text-gray-900 p-0" href="/unity-album-2022">Unity Album 2022</a>
						</li>
						<li class="nav-item p-4 pr-8">
							<a class="nav-link dark:text-white dark:hover:text-yellow-400 dark:focus:text-gray-100 text-black hover:text-yellow-400 focus-text-gray-900 p-0" href="/newscasts">Newscasts</a>
						</li>
						<li class="nav-item p-4 pr-8">
							<a class="nav-link dark:text-white dark:hover:text-yellow-400 dark:focus:text-gray-100 text-black hover:text-yellow-400 focus-text-gray-900 p-0" href="/artists">Artists</a>
						</li>
						<li class="nav-item p-4 pr-8">
							<a class="nav-link dark:text-white dark:hover:text-yellow-400 dark:focus:text-gray-100 text-black hover:text-yellow-400 focus-text-gray-900 p-0" href="/about">About us</a>
						</li>
						<li class="nav-item p-4">
							<a class="nav-link dark:text-white dark:hover:text-yellow-400 dark:focus:text-gray-100 text-black hover:text-yellow-400 focus-text-gray-900 p-0" href="/contact">Contact</a>
						</li>

                        <li class="nav-item p-4 md:pl-8 pr-8">
                            <a href="/components/app-bar">
                                <svg class="svg-inline--fa fa-image text-xl" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6h96 32H424c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48z"></path></svg><!-- <i class="fa-solid fa-image text-xl"></i> Font Awesome fontawesome.com -->
                                Link
                            </a>
                        </li>

                        <li class="nav-item p-4 md:pl-8 pr-8">
                            <LightSwitch client:load />
                        </li>
                    </ul>
                </svelte:fragment>
                </AppBar>
            </svelte:fragment>
            <svelte:fragment slot="sidebarLeft">
                <nav class="list-nav">
                    <ul>
                        <li><a href="/">Home</a></li>
                        <slot name="sidebarLeftNavList">
                        {pageList && pageList.map(page => (
                            <li>
                                <a href={"/" + page.slug} >
                                    <span class="flex-auto">
                                    {page.data.title}
                                    </span>
                                </a>
                            </li>
                        ))}
                        </slot>
                    </ul>
                </nav>
            </svelte:fragment>

            <slot />

            <svelte:fragment slot="pageFooter">
                <div class="flex gap-4 m-8">
                    <slot name="pageList">

                    <div class="card p-4 space-y-4 w-1/3">
                    <h3 class="font-bold">Pages</h3>
                    <ul class="list">
                    {pageList && pageList.map(page => (
                        <li class="list">
                            <a href={"/" + page.slug}>
                                <span class="flex-auto">
                                {page.data.title}
                                </span>
                            </a>
                        </li>
                    ))}
                    </ul>
                    </div>
                </div>
                </slot>

                <Footer />
            </svelte:fragment>
        </AppShell>
	</div>
    <!-- Service Worker -->
    <script src="/src/index.ts"></script>
	<!-- Netlify Identiy widget -->
	<script src="https://identity.netlify.com/v1/netlify-identity-widget.js" client:load></script>
</body>
</html>
<style is:global>
	:root {
		--accent: 124, 58, 237;
		--accent-gradient: linear-gradient(45deg, rgb(var(--accent)), #da62c4 30%, white 60%);
	}
	code {
		font-family: Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono,
		Bitstream Vera Sans Mono, Courier New, monospace;
	}
</style>